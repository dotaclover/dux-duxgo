import{j as e}from"./vendor-map-CE4d5YIX.js";import{A as _}from"./vendor-refine-YO-08iKi.js";import{x as I,j as N,Z as y}from"./modulepreload-polyfill-EV7mDuCf.js";import{r as w}from"./vendor-react-PEuRF1c_.js";import"./vendor-echarts-MrFpn7eE.js";import"./vendor-lib-BVPxUOb1.js";import{F}from"./manage-BKyw5xWS.js";import{j,G as k,H as C,J as S,F as t,S as V,I as x,$ as z}from"./vendor-tdesign-Bkc5HfQ6.js";import"./vendor-tinymce-D1FYj-JL.js";import{u as A}from"./useSelect-CPLYU2d6.js";import"./vendor-markdown-DBx9sqkl.js";import"./useUpload-DxbIJWgS.js";const M=({className:r,value:a,defaultValue:i,onChange:d,multiple:n,accept:g})=>{var h;const[m,c]=I({value:a,defaultValue:i,onChange:d}),f=_(),[b,u]=w.useState(!1),s=m?Array.isArray(m)?m:[m]:void 0;return e.jsxs("div",{className:N(["flex flex-col gap-2 w-full t-upload",r]),children:[e.jsxs("div",{className:"t-upload__card clearfix ",children:[s&&(s==null?void 0:s.length)>0&&((h=s.map)==null?void 0:h.call(s,(p,o)=>e.jsx(E,{url:p,onRemove:()=>{c(l=>{if(n)return l==null?void 0:l.filter((G,v)=>v!=o)})}},o))),(n||!s||(s==null?void 0:s.length)<=0)&&e.jsx("div",{className:"t-upload__card-item t-is-background",children:e.jsxs("div",{className:"t-upload__image-add t-upload__card-container t-upload__card-box",onClick:()=>u(!0),children:[e.jsx(j,{name:"add"}),e.jsx("p",{className:"t-size-s",children:f("placeholder.image",{ns:"file"})})]})})]}),e.jsx(k,{className:"app-modal",width:"800px",header:f("fields.manage",{ns:"file"}),visible:b,destroyOnClose:!0,footer:!1,onClose:()=>u(!1),children:e.jsx(F,{accept:g,mode:n?"multi":"single",onClose:()=>u(!1),onChange:p=>{const o=p.map(l=>l.url);c(n?l=>[...l,...o]:o[0])}})})]})},E=({url:r,onRemove:a})=>e.jsx("div",{className:"t-upload__card-item",children:e.jsx("div",{className:"t-upload__card-content t-is-bordered",children:e.jsx(C,{trigger:({open:i})=>e.jsx(S,{src:r,className:"t-upload__card-image w-full h-full",overlayContent:e.jsxs("div",{className:"t-upload__card-mask",children:[e.jsx("span",{className:"t-upload__card-mask-item",children:e.jsx(j,{size:"16px",name:"browse",onClick:()=>i()})}),e.jsx("span",{className:"t-upload__card-mask-item-divider"}),e.jsx("span",{className:"t-upload__card-mask-item t-upload__delete",onClick:a,children:e.jsx(j,{size:"16px",name:"delete"})})]}),overlayTrigger:"hover",fit:"contain"}),images:[r]})})}),B=r=>{const a=_(),{options:i,onSearch:d}=A({resource:"system.role",optionLabel:"name",optionValue:"id"});return e.jsxs(y,{id:r==null?void 0:r.id,children:[e.jsx(t.FormItem,{label:a("system.user.fields.roles"),name:"roles",children:e.jsx(V,{filterable:!0,onSearch:d,options:i,multiple:!0})}),e.jsx(t.FormItem,{label:a("system.user.fields.username"),name:"username",children:e.jsx(x,{})}),e.jsx(t.FormItem,{label:a("system.user.fields.nickname"),name:"nickname",children:e.jsx(x,{})}),e.jsx(t.FormItem,{label:a("system.user.fields.avatar"),name:"avatar",children:e.jsx(M,{accept:"image/*"})}),e.jsx(t.FormItem,{label:a("system.user.fields.password"),name:"password",children:e.jsx(x,{type:"password",autocomplete:"new-password"})}),e.jsx(t.FormItem,{label:a("system.user.fields.status"),name:"status",children:e.jsx(z,{})})]})};export{B as default};
