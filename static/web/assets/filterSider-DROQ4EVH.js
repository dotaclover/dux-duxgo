import{j as e}from"./vendor-map-CE4d5YIX.js";import{r as d}from"./vendor-react-PEuRF1c_.js";import{A as w,av as y,ar as k}from"./vendor-refine-YO-08iKi.js";import{j as c,U as D,w as F,V as I}from"./modulepreload-polyfill-EV7mDuCf.js";import{B as u,m as p,ab as A,ac as B}from"./vendor-tdesign-Bkc5HfQ6.js";import{B as E}from"./button-s0rDThSf.js";const S=({title:a,className:h,classWidth:n,tools:x,children:f})=>{const[l,m]=d.useState(!0);return e.jsxs("div",{className:c(["relative lg:border-r  border-component lg:flex-none",l?"lg:pr-6":"lg:pr-2",h]),children:[e.jsx(u,{className:c(["hidden lg:inline-flex  absolute top-50% -right-3 -mt-3 transition-all bg-white dark:bg-gray-12",l?"rotate-0":"rotate-180"]),action:"create",variant:"outline",shape:"circle",theme:"default",size:"small",icon:e.jsx("div",{className:"i-tabler:chevron-left"}),onClick:()=>m(s=>!s)}),e.jsx("div",{className:c(["w-full overflow-hidden transition-all ",l?`${n||"lg:w-50"} lg:opacity-100`:"lg:w-0 lg:opacity-0"]),children:e.jsxs("div",{className:c(["w-full",n||"lg:w-50"]),children:[e.jsxs("div",{className:"flex flex-1 items-center justify-between gap-2 border-b px-0 lg:py-1.8 pb-2 font-bold border-component",children:[e.jsxs("div",{className:"flex items-center gap-2 pl-2",children:[a,e.jsx(u,{className:c(["inline-flex lg:hidden",l?"rotate-0":"rotate-180"]),action:"create",variant:"text",shape:"circle",theme:"default",icon:e.jsx("div",{className:"i-tabler:chevron-up"}),onClick:()=>m(s=>!s)})]}),e.jsx("div",{className:"flex",children:x})]}),e.jsx("div",{className:c("mt-2 transition-all lg:h-auto",l?"h-auto":"h-0"),children:f})]})})]})},O=({field:a,title:h,resource:n,component:x,optionLabel:f,optionValue:l,defaultSelect:m})=>{const s=w(),[b,N]=d.useState(!1),i=d.useContext(D),{mutate:C}=y(),[o,v]=d.useState(i.filters[a]?[i.filters[a]]:[]),{data:t}=k({resource:n}),j=d.useCallback(r=>{v(r),i.setFilters({[a]:r[0]})},[a,i]);return d.useEffect(()=>{var g;if(!m||!((g=t==null?void 0:t.data)!=null&&g.length)||!i||b)return;N(()=>!0);const r=t==null?void 0:t.data[0].optionValue;j(r)},[m,a,b,t==null?void 0:t.data,i,j]),e.jsx(S,{title:h,tools:e.jsxs(e.Fragment,{children:[e.jsx(E,{resource:n,action:"create",variant:"text",shape:"circle",theme:"default",title:s("buttons.create"),icon:e.jsx("div",{className:"i-tabler:plus"}),component:x,children:e.jsx(e.Fragment,{})}),e.jsx(u,{variant:"text",shape:"circle",theme:"default",icon:e.jsx("div",{className:"i-tabler:refresh"}),onClick:()=>{v([]),i.setFilters({[a]:void 0})}}),(o==null?void 0:o.length)>0&&e.jsxs(p,{direction:"right",hideAfterItemClick:!0,placement:"bottom-left",trigger:"hover",children:[e.jsx(u,{variant:"text",shape:"circle",theme:"default",icon:e.jsx("div",{className:"i-tabler:dots-vertical"})}),e.jsxs(p.DropdownMenu,{children:[e.jsx(p.DropdownItem,{value:1,prefixIcon:e.jsx("div",{className:"i-tabler:edit"}),onClick:()=>{F.open({title:s("buttons.edit"),component:x,componentProps:{id:o}})},children:s("buttons.edit")}),e.jsx(p.DropdownItem,{value:2,prefixIcon:e.jsx("div",{className:"i-tabler:x"}),onClick:()=>{const r=A.confirm({className:"app-modal",header:s("buttons.delete"),width:350,body:e.jsx("div",{className:"p-4",children:s("buttons.confirm")}),onClose:()=>{r.hide()},onConfirm:()=>{C({resource:n,ids:[o[0]]}),r.hide()}})},children:s("buttons.delete")})]})]})]}),children:e.jsx(B,{data:t==null?void 0:t.data,activable:!0,line:!0,expandAll:!0,actived:o,icon:!0,keys:{label:f,value:l},onActive:j,empty:e.jsx("div",{className:"text-sm mt-4",children:e.jsx(I,{type:"simple"})})})})};export{O as F};
