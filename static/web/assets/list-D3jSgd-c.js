const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/show-Dy814SO0.js","assets/vendor-map-CE4d5YIX.js","assets/vendor-react-PEuRF1c_.js","assets/vendor-tdesign-Bkc5HfQ6.js","assets/vendor-refine-YO-08iKi.js","assets/modulepreload-polyfill-EV7mDuCf.js","assets/vendor-echarts-MrFpn7eE.js","assets/vendor-lib-BVPxUOb1.js","assets/vendor-tinymce-D1FYj-JL.js","assets/vendor-markdown-DBx9sqkl.js","assets/index-DBcwkRI-.js","assets/editor-Dg0x6Ku5.js","assets/useSelect-CPLYU2d6.js","assets/cascader-Csfpe9Pf.js","assets/useUpload-DxbIJWgS.js","assets/uploadFile-YsBOGyhm.js","assets/manage-BKyw5xWS.js","assets/modal-BGuy7s8c.js","assets/form-DFfOm-Vz.js"])))=>i.map(i=>d[i]);
import{_ as j}from"./vendor-markdown-DBx9sqkl.js";import{j as o}from"./vendor-map-CE4d5YIX.js";import{R as _,r as y}from"./vendor-react-PEuRF1c_.js";import{A as v,au as C,at as T,E as x,ao as F,z as M}from"./vendor-refine-YO-08iKi.js";import{w as R,Q as k}from"./modulepreload-polyfill-EV7mDuCf.js";import"./vendor-echarts-MrFpn7eE.js";import"./vendor-lib-BVPxUOb1.js";import{F as w}from"./page-DEK3AXMZ.js";import"./vendor-tinymce-D1FYj-JL.js";import{a as A,b as D,c as I,d as L,e as O,f as N,g as q,h as S,i as K,j as V,k as B,l as z,m as G,n as H,o as Q,p as U,q as X,r as J,s as W,t as Y,v as Z}from"./index-DBcwkRI-.js";import{M as $}from"./form-DFfOm-Vz.js";import{t as E,a9 as ee,B as P}from"./vendor-tdesign-Bkc5HfQ6.js";import"./editor-Dg0x6Ku5.js";import"./useSelect-CPLYU2d6.js";import"./cascader-Csfpe9Pf.js";import"./useUpload-DxbIJWgS.js";import"./uploadFile-YsBOGyhm.js";import"./manage-BKyw5xWS.js";const te=({magic:e,editResource:t,fields:r,componentEdit:l,componentShow:c})=>{const m=[A(),D(),I(),L(),O(),N(),q(),S(),K(),V(),B(),z(),G(),H(),Q(),U(),X(),J(),W(),Y(),Z()],i=v(),{mutate:f}=C(),{edit:g}=T(),h=_.useMemo(()=>{const a=[];r==null||r.map(s=>{m.map(d=>{!d||!s.list||d.name!=s.type||a.push(d.TableRender(s,i))})});const u=[{colKey:"link",title:i("table.actions"),fixed:"right",align:"center",width:160,cell:({row:s})=>o.jsxs("div",{className:"flex justify-center gap-4",children:[o.jsx(R,{title:i("buttons.show"),trigger:o.jsx(E,{theme:"primary",children:i("buttons.show")}),component:c,componentProps:{id:s.id,magic:e}}),t?o.jsx(E,{theme:"primary",onClick:()=>g(t,s.id),children:i("buttons.edit")}):o.jsx(R,{title:i("buttons.edit"),trigger:o.jsx(E,{theme:"primary",children:i("buttons.edit")}),component:l,componentProps:{id:s.id,magic:e}}),o.jsx(ee,{content:i("buttons.confirm"),destroyOnClose:!0,placement:"top",showArrow:!0,theme:"default",onConfirm:()=>{f({resource:"tools.data",id:s.id,meta:{params:{magic:e}}})},children:o.jsx(E,{theme:"danger",children:i("buttons.delete")})})]})}];return[...a,...u]},[r]),n=_.useMemo(()=>{var u;const a=(u=r==null?void 0:r.map((s,d)=>{if(!(s!=null&&s.search))return;const b=m.find(p=>p&&p.name==s.type&&(p==null?void 0:p.FilterRender));if(!(!b||!b.FilterRender))return o.jsx(b.FilterRender,{...s},d)}))==null?void 0:u.filter(s=>s!=null);return a&&a.length>0?o.jsx(o.Fragment,{children:a}):void 0},[r]);return{columns:h,filters:n}},oe=({data:e})=>{var g,h;const{params:t}=x(),r=v(),{create:l}=T(),{resource:c}=M(),{columns:m,filters:i}=te({fields:(g=e==null?void 0:e.data)==null?void 0:g.fields,magic:t==null?void 0:t.name,editResource:(h=e==null?void 0:e.data)!=null&&h.page?"tools.data":void 0,componentShow:()=>j(()=>import("./show-Dy814SO0.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16])),componentEdit:()=>j(()=>import("./modal-BGuy7s8c.js"),__vite__mapDeps([17,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,18])),sourceUrl:""});y.useEffect(()=>{var n;c!=null&&c.meta&&(c.meta.label=(n=e==null?void 0:e.data)==null?void 0:n.label)},[e]);const f=y.useMemo(()=>{var a,u;const n={rowKey:"id"};return((a=e==null?void 0:e.data)==null?void 0:a.type)=="common"&&(n.pagination=void 0),((u=e==null?void 0:e.data)==null?void 0:u.type)=="tree"&&(n.tree={childrenKey:"children",treeNodeColumnIndex:0,defaultExpandAll:!0},n.pagination=void 0),n},[e]);return o.jsx(k,{columns:m,tableHook:{meta:{params:{magic:t==null?void 0:t.name,action:"show"}}},table:f,onData:n=>{console.log("data",n)},actionRender:()=>{var n;return(n=e==null?void 0:e.data)!=null&&n.page?o.jsx(P,{icon:o.jsx("div",{className:"t-icon i-tabler:plus"}),onClick:()=>{l("tools.data")},children:r("buttons.create")}):o.jsx(R,{title:r("buttons.create"),trigger:o.jsx(P,{icon:o.jsx("div",{className:"t-icon i-tabler:plus"}),children:r("buttons.create")}),component:()=>j(()=>import("./modal-BGuy7s8c.js"),__vite__mapDeps([17,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,18])),componentProps:{magic:t==null?void 0:t.name}})},filterRender:i?()=>i:void 0})},re=()=>{var l,c,m;const{params:e}=x(),{resource:t}=M(),{data:r}=F({url:"tools/magic/config",method:"get",meta:{params:{magic:e==null?void 0:e.name}},queryOptions:{cacheTime:0}});return t!=null&&t.meta&&(t.meta.label=(l=r==null?void 0:r.data)==null?void 0:l.label),o.jsx(w,{formProps:{labelAlign:"top"},resource:"tools.dataPage",back:!0,id:0,action:"edit",useFormProps:{meta:{mode:"page"},queryOptions:{cacheTime:0}},queryParams:{magic:e==null?void 0:e.name},children:o.jsx("div",{children:((c=r==null?void 0:r.data)==null?void 0:c.fields)&&o.jsx($,{fields:(m=r==null?void 0:r.data)==null?void 0:m.fields})})})},se=()=>{const{params:e}=x(),{data:t}=F({url:"tools/magic/config",method:"get",meta:{params:{magic:e==null?void 0:e.name}}});return(t==null?void 0:t.code)!==200?null:t.data.type==="page"?o.jsx(re,{}):o.jsx(oe,{data:t})},ye=()=>{const{params:e}=x();return o.jsx(se,{},e==null?void 0:e.name)};export{ye as default};
